#!/usr/bin/env bash

cmd=$1
opt=$2
url=$3

if [ "$cmd"x == "install"x ];then
    echo "init api-gen..."
    (cd cli-tools/api-gen && npm install)
    echo "init pretty-json..."
    (cd cli-tools/pretty-json && npm install )
    echo "init zero-json..."
    if [ ! -d "./cli-tools/zero-json/swagger" ];then
        mkdir ./cli-tools/zero-json/swagger
    fi
    (cd cli-tools/zero-json && npm install)
    echo "init..."
    if [ ! -d "./pub" ];then
        mkdir swagger
    fi
    if [ ! -d "./temp" ];then
        mkdir temp
    fi
    npm install -g
    exit 0
elif [ "$cmd"x == "get"x -a "$opt"x == "swagger"x ];then
    (cd cli-tools/zero-json && \
    curl $url --out swagger/index.json && \
    node index.js swagger format && mv swagger/format.json ../../pub/swagger.json)
    exit 0
fi

echo "Usage: ./init [install | get swagger <url>]";
